<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaticcasamuppƒÅda Star Visualization</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.18.1/cytoscape.min.js"></script>
    <style>
        #cy {
            width: 80%;
            height: 600px;
            margin: auto;
            display: block;
            border: 1px solid #aaa;
        }
    </style>
</head>
<body>

<div id="cy"></div>

<script>
    var cy = cytoscape({
        container: document.getElementById('cy'),

           elements: [
            // Main Nodes
            { data: { id: 'ignorance', label: 'Ignorance' } },
            { data: { id: 'fabrications', label: 'Fabrications' } },
            { data: { id: 'consciousness', label: 'Consciousness' } },
            { data: { id: 'nameForm', label: 'Name & Form' } },
            { data: { id: 'sixSenses', label: 'Six Senses' } },
            { data: { id: 'contact', label: 'Contact' } },
            { data: { id: 'feeling', label: 'Feeling' } },
            { data: { id: 'craving', label: 'Craving' } },
            { data: { id: 'clinging', label: 'Clinging' } },
            { data: { id: 'becoming', label: 'Becoming' } },
            { data: { id: 'birth', label: 'Birth' } },
            { data: { id: 'oldAgeDeath', label: 'Old Age & Death' } },
            // Offshoot Nodes
            { data: { id: 'wrongView', label: 'Wrong View' } },
            { data: { id: 'loba', label: 'Loba' } },
            { data: { id: 'dosa', label: 'Dosa' } },
            { data: { id: 'moha', label: 'Moha' } },
            { data: { id: 'aggregates', label: 'Aggregates' } },
            { data: { id: 'senseBases', label: 'Sense Bases' } },
            // Edges for Main Nodes
            { data: { source: 'ignorance', target: 'fabrications' } },
            { data: { source: 'fabrications', target: 'consciousness' } },
            { data: { source: 'consciousness', target: 'nameForm' } },
            { data: { source: 'nameForm', target: 'sixSenses' } },
            { data: { source: 'sixSenses', target: 'contact' } },
            { data: { source: 'contact', target: 'feeling' } },
            { data: { source: 'feeling', target: 'craving' } },
            { data: { source: 'craving', target: 'clinging' } },
            { data: { source: 'clinging', target: 'becoming' } },
            { data: { source: 'becoming', target: 'birth' } },
            { data: { source: 'birth', target: 'oldAgeDeath' } },
            { data: { source: 'oldAgeDeath', target: 'ignorance' } },
            // Edges for Offshoot Nodes
            { data: { source: 'ignorance', target: 'wrongView' } },
            { data: { source: 'fabrications', target: 'loba' } },
            { data: { source: 'fabrications', target: 'dosa' } },
            { data: { source: 'fabrications', target: 'moha' } },
            { data: { source: 'consciousness', target: 'aggregates' } },
            { data: { source: 'nameForm', target: 'senseBases' } },
        ],

        style: [
            {
                selector: 'node',
                style: {
                    'background-color': '#666',
                    'label': 'data(label)',
                    'text-wrap': 'wrap',
                    'text-max-width': '120px'
                }
            },
            {
                selector: 'edge',
                style: {
                    'width': 3,
                    'line-color': '#ccc',
                    'target-arrow-color': '#ccc',
                    'target-arrow-shape': 'triangle'
                }
            }
        ],

        layout: {
            name: 'preset',
            positions: function(node) {
                // Determine the center of the circle
                var center = { x: window.innerWidth / 2, y: window.innerHeight / 2 };
                var radius = 250;
                var angleFactor = 2 * Math.PI / 12;  // 12 main nodes
                var nodeIndex = node.data('id');
                var mainNodes = ['ignorance', 'fabrications', 'consciousness', 'nameForm', 'sixSenses', 'contact', 'feeling', 'craving', 'clinging', 'becoming', 'birth', 'oldAgeDeath'];

                if (mainNodes.includes(nodeIndex)) {
                    var i = mainNodes.indexOf(nodeIndex);
                    return {
                        x: center.x + radius * Math.cos(i * angleFactor),
                        y: center.y + radius * Math.sin(i * angleFactor)
                    };
                } else {
                    var parent;
                    var offset = 120;  // Distance from parent node
                    switch (nodeIndex) {
                        case 'wrongView': parent = 'ignorance'; break;
                        case 'loba': case 'dosa': case 'moha': parent = 'fabrications'; break;
                        case 'aggregates': parent = 'consciousness'; break;
                        case 'senseBases': parent = 'nameForm'; break;
                    }
                    var parentPos = this.positions(parent);
                    var dx = parentPos.x - center.x;
                    var dy = parentPos.y - center.y;
                    var len = Math.sqrt(dx * dx + dy * dy);
                    return {
                        x: parentPos.x + (dx / len) * offset,
                        y: parentPos.y + (dy / len) * offset
                    };
                }
            }
        }
    });
</script>

</body>
</html>



